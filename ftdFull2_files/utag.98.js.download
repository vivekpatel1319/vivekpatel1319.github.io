//tealium universal tag - utag.98 ut4.0.202007010110, Copyright 2020 Tealium.com Inc. All Rights Reserved.
(function(C,I){C.CordialObject=I,C[I]=C[I]||function(){(C[I].q=C[I].q||[]).push(arguments)};C[I].l=1*new Date,C[I].q=[];})(window,'crdl');try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}
var match=/ut\d\.(\d*)\..*/.exec(utag.cfg.v);if(utag.ut.loader===undefined||!match||parseInt(match[1])<41){u.loader=function(o,a,b,c,l,m){utag.DB(o);a=document;if(o.type=="iframe"){m=a.getElementById(o.id);if(m&&m.tagName=="IFRAME"){b=m;}else{b=a.createElement("iframe");}o.attrs=o.attrs||{};utag.ut.merge(o.attrs,{"height":"1","width":"1","style":"display:none"},0);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";}if(o.id){b.id=o.id;}for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l]);}b.setAttribute("src",o.src);if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){this.onreadystatechange=null;o.cb();}};}}if(o.type!="img"&&!m){l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}}};}else{u.loader=utag.ut.loader;}
if(utag.ut.typeOf===undefined){u.typeOf=function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();};}else{u.typeOf=utag.ut.typeOf;}
u.ev={'view':1,'link':1};u.initialized=false;u.map={"_sm_98_1":"account_key","_sm_98_2":"domain","customer_email":"auth_data.email,contact_data.channels.email.address,properties.email","Legacy_CustomerEmail":"auth_data.email,contact_data.channels.email.address","crdl_product_name":"name,properties.ProductName","crdl_product_category":"category,properties.category","crdl_event_name":"event","crdl_prid":"properties.PRID","PageID":"properties.PageID","ProductOrigin":"properties.ProductGroup","page_type":"properties.pageType","crdl_subscribe_status":"contact_data.channels.email.subscribeStatus,properties.channels.email.subscribeStatus","crdl_list_name":"list","crdl_product_id":"productID,sku,properties.productID","crdl_product_price":"itemPrice,properties.ProductPrice","product_category":"category,properties.category","crdl_product_quantity":"qty,properties.qty","crdl_source_code":"properties.SourceCode","crdl_order_id":"orderID,properties.orderID","ut.profile":"properties.SiteType","crdl_product_url":"url,properties.ProductURL","crdl_product_image":"images,properties.images","crdl_clear_cart":"clearcart","crdl_delay":"delay","crdl_referring_page":"properties.ReferringPageID","_sm_98_26":"removecart","crdl_product_promo_eligible":"properties.ProductPromoEligible","crdl_customer_id":"properties.FLCustomerID,contact_data.customer_id,contact_data.customer_id_str","crdl_product_sales_price":"salePrice,properties.ProductSalePrice","_sm_98_30":"properties.orgId","_sm_98_31":"properties.orgGroups","_sm_98_32":"connectUrl","_sm_98_33":"trackUrl","_sm_98_34":"cookieDomain","crdl_sms_address":"properties.sms","crdl_source":"properties.source","crdl_sms_submission":"contact_data.sms_submission_data"};u.extend=[function(a,b){try{b['_sm_98_1']=b['ut.env']=='prod'?'ftd-ftd':'ftd-ftd';}catch(e){utag.DB(e);}
try{b['_sm_98_2']="d.eml.ftd.com";}catch(e){utag.DB(e);}
try{b['_sm_98_26']=b.link_name&&b.link_name.toLowerCase()=="removefromcart"?true:false;}catch(e){utag.DB(e);}
try{b['_sm_98_30']=__NEXT_DATA__.props.initialState.config.client.orgId;}catch(e){utag.DB(e);}
try{b['_sm_98_31']=__NEXT_DATA__.props.initialState.config.client.orgGroups;}catch(e){utag.DB(e);}
try{b['_sm_98_32']="//d.eml.ftd.com";}catch(e){utag.DB(e);}
try{b['_sm_98_33']="//se.eml.ftd.com";}catch(e){utag.DB(e);}
try{b['_sm_98_34']="ftd.com";}catch(e){utag.DB(e);}},function(a,b){try{if(1){var pridExists=false;if((typeof b['qp.PRID']!="undefined"&&b['qp.PRID']!="")||(typeof b['qp.prid']!="undefined"&&b['qp.prid']!="")){pridExists=true;var prid=b['qp.PRID']||b['qp.prid'];window.crdl_utils.setCookie("crdl_prid",prid);b['cp.crdl_prid']=prid;}
if(b['cp.crdl_prid']){b.crdl_prid=b['cp.crdl_prid'];}
if(typeof b.PageID=='undefined'||b.PageID==""){b.PageID=b['dom.pathname'];}
if(typeof digitalData!="undefined"&&(digitalData.product||(digitalData.cart&&digitalData.cart.item)||(digitalData.transaction&&digitalData.transaction.product))){var items;try{items=digitalData.transaction.product;}catch(e){}
try{items=items||digitalData.cart.item;}catch(e){}
try{items=items||digitalData.product;}catch(e){}
b['crdl_product_category']=[];for(var i=0;i<items.length;i++){b['crdl_product_category'].push(items.productType||'no category');}}
var config={custId:(digitalData.user&&digitalData.user.profile&&digitalData.user.profile.profileInfo&&digitalData.user.profile.profileInfo.legacyFlCustId?digitalData.user.profile.profileInfo.legacyFlCustId:""),cookieName:"crdl_customer_id",expiry:365,checkIsNumber:true};function isNumber(custId){if(isNaN(custId)||parseInt(custId)<1){return false;}else if(!isNaN(custId)&&parseInt(custId)>0){return true;}}
function writeCookie(custId,cookieName){window.crdl_utils.setCookie(cookieName,custId,{exp:(config.expiry*24*60)});b['cp.'+cookieName]=custId;}
var custId=config.custId;var cookieName=config.cookieName;var write=true;if((typeof custId!=="undefined"&&custId!=="")||(typeof b['qp.CustId']!=="undefined"&&b['qp.CustId']!=="")){custId=custId||b['qp.CustId'];if(config.checkIsNumber)write=isNumber(custId);if(write)writeCookie(custId,cookieName);b.crdl_customer_id=custId;}
else{if(typeof b['cp.'+cookieName]!=="undefined"&&b['cp.'+cookieName]!==""){b['crdl_customer_id']=b['cp.'+cookieName];}}
if(typeof b.customer_email=="undefined"||b.customer_email==""||b.customer_email==null){b.customer_email=window.crdl_utils.getCookie('customer_email');if(b.customer_email!=null&&b.customer_email.indexOf('"')==0){b.customer_email=b.customer_email.split('"')[1];}
if(typeof digitalData!="undefined"&&digitalData.page&&digitalData.page.pageInfo&&digitalData.page.pageInfo.pageName&&digitalData.page.pageInfo.pageName.toLowerCase()=="review"){if(typeof __NEXT_DATA__!="undefined"&&__NEXT_DATA__.props&&__NEXT_DATA__.props.initialState&&__NEXT_DATA__.props.initialState.cart&&__NEXT_DATA__.props.initialState.cart.cartData&&__NEXT_DATA__.props.initialState.cart.cartData.email){b.customer_email=__NEXT_DATA__.props.initialState.cart.cartData.email;}
else if(b['cp.payment_guest_email']){b.customer_email=b['cp.payment_guest_email'];}
if(b.customer_email&&!b.crdl_subscribe_status&&b['cp.js_opt_in']&&b['cp.js_opt_in']==='true'){b.crdl_subscribe_status='subscribed';}}
if(typeof digitalData!="undefined"&&digitalData.transaction&&digitalData.transaction.total&&digitalData.transaction.total.customerEmail){b.customer_email=digitalData.transaction.total.customerEmail;}}
if(b.event_name&&b.event_name=="email_savings_signup"){b.crdl_event_name=pushEvent('contact',b.crdl_event_name);b.crdl_event_name=pushEvent(b.event_name,b.crdl_event_name);b.crdl_list_name='email_savings_signup_list';b.crdl_subscribe_status="subscribed";}
if(a=='link'&&b.link_name&&b.link_name.toLowerCase()=='createaccount'){b.crdl_event_name=pushEvent('create_account',b.crdl_event_name);b.crdl_subscribe_status='subscribed';b.customer_email=b['cp.new_email'];}
if(typeof digitalData!='undefined'&&digitalData.user&&digitalData.user.profile&&digitalData.user.profile.profileInfo&&digitalData.user.profile.profileInfo.sourceID){b.crdl_source_code=digitalData.user.profile.profileInfo.sourceID;}
if(typeof digitalData!='undefined'&&digitalData.page&&digitalData.page.pageInfo&&digitalData.page.pageInfo.pageType){var pageType=digitalData.page.pageInfo.pageType.toLowerCase();if(pageType.indexOf('home')>-1){b.crdl_event_name=pushEvent('browse_home',b.crdl_event_name);}else if(pageType.indexOf('category')>-1){b.crdl_event_name=pushEvent('browse_cat',b.crdl_event_name);}else if(pageType=='product page'&&a=='view'){var pids=[],images=[],urls=[],names=[],prices=[],categories=[],quantities=[];if(typeof digitalData.product=="undefined"){setTimeout(function(localUDO){localUDO=b;trackBrowsedProduct(localUDO,true);},1000);}else{trackBrowsedProduct(b);}
function trackBrowsedProduct(b,firePageView){var pid=digitalData.product[0].productID;var price=(digitalData.product[0].productRegularPrice||digitalData.product[0].productCurrentPrice).toString().replace('$','').trim();var salePrice=(digitalData.product[0].productCurrentPrice||digitalData.product[0].productRegularPrice).toString().replace('$','').trim();var name=digitalData.product[0].productName.trim();var category=digitalData.product[0].productType||'core';try{var isAfterDiscount=__NEXT_DATA__.props.initialState.products[digitalData.product[0].productID].priceAttributes.isPromoEligible;if(isAfterDiscount){for(var i=0;i<__NEXT_DATA__.props.initialState.pricing.products[digitalData.product[0].productID].prices.length;i++){var p=__NEXT_DATA__.props.initialState.pricing.products[digitalData.product[0].productID].prices[i];switch(p.type){case'sale':salePrice=p.value;break;case'regular':price=p.value;break;default:break;}}}}catch(e){utag.DB("*** Cordial JS Listener: Error trying to check product if discount alread applied! ***");}
var foundProductData=true;if(!window.ls[pid]||!window.ls[pid].imageURL){foundProductData=false;}
if(foundProductData){b.crdl_product_image=[window.ls[pid].imageURL];}else{try{b.crdl_product_image=["https:"+jQuery('#main-content img').attr('src').split('?')[0]];}catch(e){}}
b.crdl_product_id=pid;b.crdl_product_url=document.location.href;b.crdl_product_name=name;b.crdl_product_price=price;b.crdl_product_sales_price=salePrice;b.crdl_product_category=[category];b.crdl_product_quantity=[1];b.foundProductData=true;b.crdl_event_name=pushEvent('browse',b.crdl_event_name);b.crdl_event="event";b.page_type="product";try{b.crdl_referring_page=digitalData.page.pageInfo.referringURL!=null?digitalData.page.pageInfo.referringURL.split(document.domain)[1]:"";}catch(e){}
if(firePageView){utag.view(b,null,[98]);}}}}
try{if(a=="link"&&b.link_name&&b.link_name.toLowerCase()=="addtocart"){var foundProductData=true;var pids=[],images=[],urls=[],names=[],prices=[],salePrices=[],categories=[],quantities=[],promo_eligible=[];for(var i=0;i<digitalData.cart.item.length;i++){var name=digitalData.cart.item[i].productName.trim().toLowerCase();if(!window.lsByName[name]||!window.lsByName[name].pid){foundProductData=false;break;}
if(!window.ls[window.lsByName[name].pid]||!window.ls[window.lsByName[name].pid].imageURL){foundProductData=false;break;}
if(!window.ls[window.lsByName[name].pid]||!window.ls[window.lsByName[name].pid].productURL){foundProductData=false;break;}
pids.push(window.lsByName[name].pid);images.push(window.ls[window.lsByName[name].pid].imageURL);urls.push(window.ls[window.lsByName[name].pid].productURL);names.push(digitalData.cart.item[i].productName.trim());prices.push(parseFloat((digitalData.cart.item[i].productRegularPrice).toString().replace('$','').trim()).toFixed(2));salePrices.push(parseFloat((digitalData.cart.item[i].productOnSalePrice).toString().replace('$','').trim()).toFixed(2));categories.push('core');quantities.push(1);promo_eligible.push(digitalData.cart.item[i].productPromoEligible);}
if(foundProductData){b.foundProductData=true;b.crdl_clear_cart=true;b.crdl_event_name=pushEvent('cartitem',b.crdl_event_name);b.crdl_product_id=pids;b.crdl_product_image=images;b.crdl_product_url=urls;b.crdl_product_name=names;b.crdl_product_price=prices;b.crdl_product_sales_price=salePrices;b.crdl_product_category=categories;b.crdl_product_quantity=quantities;b.crdl_product_promo_eligible=promo_eligible;}else{var index=digitalData.cart.item.length-1;b.foundProductData=false;b.crdl_event_name=pushEvent('cartitem',b.crdl_event_name);b.crdl_product_id=[digitalData.product[0].productID];b.crdl_product_image=["https:"+jQuery('#main-content img').attr('src').split('?')[0]];b.crdl_product_url=[document.location.href];b.crdl_product_name=[digitalData.product[0].productName];b.crdl_product_price=[digitalData.cart.item[index].productRegularPrice];b.crdl_product_sales_price=[digitalData.cart.item[index].productOnSalePrice];b.crdl_product_category=[digitalData.product[0].productType];b.crdl_product_quantity=[1];b.crdl_product_promo_eligible=[digitalData.product[0].productPromoEligible];}}}catch(e){utag.DB(e);}
try{var pageType=digitalData.page.pageInfo.pageType.toLowerCase();var pageName=digitalData.page.pageInfo.pageName.toLowerCase();if((a=="view"&&pageType=="checkout"&&(pageName=="delivery"||pageName=="payment"||pageName=="review"))||(a=="view"&&pageType=="cart"&&pageName=="full cart")){window.lsByName=window.lsByName||{};window.ls=window.ls||{};var foundProductData=true;var pids=[],images=[],urls=[],names=[],prices=[],salePrices=[],categories=[],quantities=[],promo_eligible=[];for(var i=0;i<digitalData.cart.item.length;i++){try{var name=digitalData.cart.item[i].productName.trim().toLowerCase();if(!window.lsByName[name]||!window.lsByName[name].pid){foundProductData=false;break;}
if(!window.ls[window.lsByName[name].pid]||!window.ls[window.lsByName[name].pid].imageURL){foundProductData=false;break;}
if(!window.ls[window.lsByName[name].pid]||!window.ls[window.lsByName[name].pid].productURL){foundProductData=false;break;}
pids.push(window.lsByName[name].pid);images.push(window.ls[window.lsByName[name].pid].imageURL);urls.push(window.ls[window.lsByName[name].pid].productURL);names.push(digitalData.cart.item[i].productName.trim());prices.push(parseFloat(digitalData.cart.item[i].productRegularPrice));salePrices.push(parseFloat(digitalData.cart.item[i].productOnSalePrice));categories.push(digitalData.cart.item[i].productType||'core');quantities.push(1);promo_eligible.push(digitalData.cart.item[i].productPromoEligible||'');}catch(e){foundProductData=false;}}
if(foundProductData){b.crdl_product_id=pids;b.crdl_product_image=images;b.crdl_product_url=urls;b.crdl_product_name=names;b.crdl_product_price=prices;b.crdl_product_sales_price=salePrices;b.crdl_product_category=categories;b.crdl_product_quantity=quantities;b.crdl_product_promo_eligible=promo_eligible;b.crdl_clear_cart=true;b.foundProductData=true;b.crdl_event_name=pushEvent('cartitem',b.crdl_event_name);b.crdl_event='event';}
else{var pids=[],images=[],urls=[],names=[],prices=[],salePrices=[],categories=[],quantities=[],promo_eligible=[];var cartItemSkus=jQuery('.cart-items .cartProduct .product-wrapper .product-id');var cartItemLinks=jQuery('.cart-items .cartProduct .product-wrapper .product-link');var cartItemImages=jQuery('.cart-items .cartProduct .product-wrapper .product-image img');for(var i=0;i<digitalData.cart.item.length;i++){pids.push(digitalData.cart.item[i].productID);images.push(cartItemImages[i].src.split('?')[0]);urls.push(cartItemLinks[i].href.replace('?',''));names.push(digitalData.cart.item[i].productName.trim());prices.push(parseFloat((digitalData.cart.item[i].productRegularPrice).toString().replace('$','').trim()));salePrices.push(parseFloat((digitalData.cart.item[i].productOnSalePrice).toString().replace('$','').trim()));categories.push(digitalData.cart.item[i].productType||'core');quantities.push(1);try{if(jQuery(jQuery('.product-wrapper')[i]).find('.promo-eligible-text').length>0&&jQuery(jQuery('.product-wrapper')[i]).find('.promo-eligible-text').text().indexOf('not eligible for promotions')>-1){promo_eligible.push(false);}else{promo_eligible.push(true);}}catch(e){}}
b.crdl_product_id=pids;b.crdl_product_image=images;b.crdl_product_url=urls;b.crdl_product_name=names;b.crdl_product_price=prices;b.crdl_product_sales_price=salePrices;b.crdl_product_category=categories;b.crdl_product_quantity=quantities;b.crdl_product_promo_eligible=promo_eligible;b.crdl_clear_cart=true;b.foundProductData=true;b.crdl_event_name=pushEvent('cartitem',b.crdl_event_name);}}
else if(b.event_name&&b.event_name.toLowerCase()=="orderconfirmation"&&digitalData.transaction&&digitalData.transaction.transactionID){b.customer_email=b.customer_email||digitalData.transaction.total.customerEmail||"";if(b['cp.js_opt_in']&&b['cp.js_opt_in']=="true"){b.crdl_subscribe_status="subscribed";window.crdl_utils.delCookie('js_opt_in');}
var smsPhoneNumber=window.sessionStorage.getItem('sms_address')||null;var smsOptIn=window.sessionStorage.getItem('sms_opt_in')||null;if(smsOptIn=="true"){b.crdl_event_name=pushEvent('sms_submitted',b.crdl_event_name);b.crdl_sms_address=smsPhoneNumber;b.crdl_source='order_confirmation';b.crdl_sms_submission=JSON.stringify({email:b.customer_email.toLowerCase().trim(),sms:b.crdl_sms_address,source:b.crdl_source,orderID:digitalData.transaction.transactionID});}
b.crdl_order_id=digitalData.transaction.transactionID;b.crdl_event_name=pushEvent('order',b.crdl_event_name);b.crdl_product_name=[];b.crdl_product_category=[];b.crdl_product_id=[];b.crdl_product_price=[];b.crdl_product_quantity=[];b.crdl_product_url=[];b.crdl_product_image=[];var orderItems=digitalData.transaction.product;for(var i=0;i<orderItems.length;i++){b.crdl_product_name.push(orderItems[i].productName);b.crdl_product_category.push(orderItems[i].productType);b.crdl_product_id.push(orderItems[i].productID);b.crdl_product_price.push(orderItems[i].productCurrentPrice.toString().replace('$',''));b.crdl_product_quantity.push('1');if(ls[orderItems[i].productID]&&ls[orderItems[i].productID].productURL){b.crdl_product_url.push(ls[orderItems[i].productID].productURL);}
if(ls[orderItems[i].productID]&&ls[orderItems[i].productID].imageURL){b.crdl_product_image.push(orderItems[i].imageURL);}}
localStorage.removeItem('crdl_data');localStorage.removeItem('crdl_data_by_name');if(typeof window.ls!="undefined"){window.ls={};}
if(typeof window.lsByName!="undefined"){window.lsByName={};}}}catch(e){utag.DB(e);}
try{if(b.link_name&&b.link_name.toLowerCase()=='removefromcart'){if(typeof digitalData==="object"&&digitalData.removeCart&&digitalData.removeCart.product){if(digitalData.cart&&digitalData.cart.cartCount&&digitalData.cart.cartCount==1){b.crdl_clear_cart=true;b.crdl_event_name=pushEvent('cartitem',b.crdl_event_name);}else{if(digitalData.removeCart.product.length>0){b.crdl_event_name=pushEvent('cartitem',b.crdl_event_name);var i=digitalData.removeCart.product.length-1;b.crdl_product_id=[digitalData.removeCart.product[i].productVariationID||digitalData.removeCart.product[i].productID];b.crdl_product_sku=[digitalData.removeCart.product[i].productVariationID||digitalData.removeCart.product[i].productID];b.crdl_product_quantity=[1];}}}}}catch(e){utag.DB(e);}
if(b.event_name&&b.event_name.toLowerCase()=='minicart'){if(typeof digitalData==="object"&&digitalData.page&&digitalData.pageInfo&&digitalData.page.pageInfo.pageName&&digitalData.page.pageInfo.pageName.toLowerCase()=="empty cart"){b.crdl_clear_cart=true;}}
if(b.Legacy_CustomerEmail||b.customer_email){b.crdl_event_name=pushEvent('contact',b.crdl_event_name);}
function pushEvent(eventName,UDO,temp){UDO=UDO||'';temp=','+UDO+',';if(temp.indexOf(','+eventName+',')==-1){temp=UDO.length>0?UDO.split(','):[];temp.push(eventName)
return temp.join(',');}else{return UDO;}}}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){utag.DB("send:98");var c,d,e,f,h,i;u.data={"account_key":"","cookieLife":365,"trackUrl":"//track.cordial.io","connectUrl":"//track.cordial.io","cookieDomain":"cordial.io","event":[],"properties":{},"auth_data":{},"contact_data":{},"productID":[],"sku":[],"category":[],"name":[],"description":[],"qty":[],"itemPrice":[],"salePrice":[],"url":[],"images":[],"attr":[],"orderID":"","customerID":"","tax":"","shippingAndHandling":"","shippingAddress":{},"billingAddress":{},"queue":[]};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){if(typeof utag_err!='undefined'){utag_err.push({e:'extension error:'+e,s:utag.cfg.path+'utag.'+id+'.js',l:c,t:'ex'})}}};for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){if(e[f].indexOf('properties.')===0){createObjectStructure(u.data.properties,e[f].substring(11),b[d]);}else if(e[f].indexOf('auth_data.')===0){createObjectStructure(u.data.auth_data,e[f].substring(10),b[d]);}else if(e[f].indexOf('contact_data.')===0){createObjectStructure(u.data.contact_data,e[f].substring(13),b[d]);}else if(e[f].indexOf('shippingAddress.')===0){createObjectStructure(u.data.shippingAddress,e[f].substring(16),b[d]);}else if(e[f].indexOf('billingAddress.')===0){createObjectStructure(u.data.billingAddress,e[f].substring(15),b[d]);}else if(e[f]==='event'){u.data.event=u.data.event.concat(b[d].split(','));}else{u.data[e[f]]=b[d];}}}else{h=d.split(":");if(h.length===2&&b[h[0]]===h[1]){if(u.map[d]){u.data.event=u.data.event.concat(u.map[d].split(","));}}}}
u.data.productID=u.data.productID.length>0?u.data.productID:b._cprod.slice(0);u.data.sku=u.data.sku.length>0?u.data.sku:b._csku.slice(0);u.data.category=u.data.category.length>0?u.data.category:b._ccat.slice(0);u.data.name=u.data.name.length>0?u.data.name:b._cprodname.slice(0);u.data.qty=u.data.qty.length>0?u.data.qty:b._cquan.slice(0);u.data.itemPrice=u.data.itemPrice.length>0?u.data.itemPrice:b._cprice.slice(0);u.data.salePrice=u.data.salePrice.length>0?u.data.salePrice:[];u.data.orderID=u.data.orderID||b._corder||"";u.data.customerID=u.data.customerID||b._ccustid||"";u.data.tax=u.data.tax||b._ctax||"";u.data.shippingAndHandling=u.data.shippingAndHandling||b._cship||"";u.data.mcID=u.data.mcID||"";u.data.base_url=u.data.base_url||u.data.connectUrl+"/track.v2.js";if(!u.initialized){if(!u.data.account_key){utag.DB('Missing Cordial Account Key. Tag Execution Stopped.');return false;}
crdl('connect',u.data.account_key,{cookieLife:u.data.cookieLife,trackUrl:u.data.trackUrl,connectUrl:u.data.connectUrl,cookieDomain:u.data.cookieDomain});}
if(u.data.event.length===0){utag.DB('No event specified for Cordial. Tag Execution Stopped.');}else{if(u.typeOf(u.data.event)!=='array'){u.data.event=u.data.event.split(',');}}
if(u.data.orderID&&u.data.event.indexOf('order')<0){u.data.event.push('order');}
if(u.data.event.indexOf('order')>=0&&u.data.event.indexOf('contact')<0){u.data.event.push('contact');}
function createObjectStructure(obj,key,value){var parts=key.split('.');for(var i=0;i<parts.length-1;i++){if(typeof obj[parts[i]]==='undefined'){obj[parts[i]]={};}
obj=obj[parts[i]];}
obj[parts.slice(-1)]=value;}
function objectLength(obj){var size=0,key;for(key in obj){if(obj.hasOwnProperty(key))size++;}
return size;}
function getProductData(){var products=[];for(var p=0;p<u.data.productID.length;p++){var obj={};obj.productID=u.data.productID[p];obj.sku=u.data.sku[p];obj.category=u.data.category[p];obj.name=u.data.name[p];if(u.data.description[p]){obj.description=u.data.description[p];}
if(u.data.qty[p]){obj.qty=parseInt(u.data.qty[p]);}
if(u.data.itemPrice[p]){obj.itemPrice=parseFloat(u.data.itemPrice[p]);}
if(u.data.salePrice[p]){obj.salePrice=parseFloat(u.data.salePrice[p]);}
if(u.data.url[p]){obj.url=u.data.url[p];}
if(u.data.images[p]){obj.images=u.data.images[p].split(',');}
if(u.data.attr[p]){obj.attr=u.data.attr[p];}
products.push(obj);}
return products;}
function getOrderData(){var obj={};obj.orderID=u.data.orderID;if(u.data.customerID){obj.customerID=u.data.customerID;}
if(u.data.tax){obj.tax=u.data.tax;}
if(u.data.shippingAndHandling){obj.shippingAndHandling=u.data.shippingAndHandling;}
if(objectLength(u.data.shippingAddress)>0){obj.shippingAddress=u.data.shippingAddress;}
if(objectLength(u.data.billingAddress)>0){obj.billingAddress=u.data.billingAddress;}
obj.items=getProductData();if(u.data.mcID){obj.mcID=u.data.mcID;}
return obj;}
var sorted=[];for(var i=0;i<u.data.event.length;i++){if(u.data.event[i]=="contact"){sorted.unshift(u.data.event[i]);}else{sorted.push(u.data.event[i]);}}
u.data.event=sorted;for(var i=0;i<u.data.event.length;i++){switch(u.data.event[i]){case"contact":if(objectLength(u.data.contact_data)>0){u.data.queue.push(['contact',u.data.auth_data,u.data.contact_data]);u.data.queue.push(['event','contact_updated',u.data.contact_data]);}else{u.data.queue.push(['contact',u.data.auth_data,{}]);}
if(window.crdl_utils&&window.crdl_utils.setCookie){window.crdl_utils.setCookie('crdl_ftd','1',{'exp':(365*24*60)});}
break;case"cartitem":if(u.data.clearcart){u.data.queue.push(['cart','clear']);}
u.data.queue.push(['cartitem','add',getProductData()]);u.data.queue.push(['event','cart',getProductData()]);break;case"order":u.data.queue.push(['order','add',getOrderData()]);u.data.queue.push(['event','order',getOrderData()]);break;case"forget":u.data.queue.push(['forget']);break;default:if(objectLength(u.data.properties)>0){u.data.queue.push(['event',u.data.event[i],u.data.properties]);}else{u.data.queue.push(['event',u.data.event[i]]);}
break;}}
if(u.data.queue.length>0){crdl(u.data.queue);}else{utag.DB('No data to send to Cordial. Tag Execution Stopped.');}
if(!u.initialized){u.initialized=true;u.loader({"type":"script","src":u.data.base_url,"cb":null,"loc":"script","id":'utag_98'});}
utag.DB("send:98:COMPLETE");}};utag.o[loader].loader.LOAD(id);})("98","providecommerce.ftd");}catch(error){utag.DB(error);}
