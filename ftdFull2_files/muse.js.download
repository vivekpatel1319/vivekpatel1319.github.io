/*! For license information please see muse.js.LICENSE.txt */
!function(){var e={808:function(e,t,r){var n,o;!function(i){if(void 0===(o="function"==typeof(n=i)?n.call(t,r,t,e):n)||(e.exports=o),!0,e.exports=i(),!!0){var a=window.Cookies,c=window.Cookies=i();c.noConflict=function(){return window.Cookies=a,c}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function o(){}function i(t,r,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(r);/^[\{\[]/.test(a)&&(r=a)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var u in i)i[u]&&(c+="; "+u,!0!==i[u]&&(c+="="+i[u].split(";")[0]));return document.cookie=t+"="+r+c}}function a(e,r){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var c=i[a].split("="),u=c.slice(1).join("=");r||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var s=t(c[0]);if(u=(n.read||n)(u,s)||t(u),r)try{u=JSON.parse(u)}catch(e){}if(o[s]=u,e===s)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,r){i(t,"",e(r,{expires:-1}))},o.defaults={},o.withConverter=r,o}((function(){}))}))},957:function(e){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=26)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(22);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})}));var o=r(10);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})}))},function(e,t,r){"use strict";function n(e){var t=e.location;if(!t)throw new Error("Can not read window location");var r=t.protocol;if(!r)throw new Error("Can not read window protocol");if(r===B.FILE_PROTOCOL)return"file://";var n=t.host;if(!n)throw new Error("Can not read window host");return r+"//"+n}function o(e){var t=n(e=e||window);return t&&e.mockDomain&&0===e.mockDomain.indexOf(B.MOCK_PROTOCOL)?e.mockDomain:t}function i(e){try{if(!e.location.href)return!0;if("about:blank"===e.location.href)return!0}catch(e){}return!1}function a(e){try{var t=Object.getOwnPropertyDescriptor(e,"location");if(t&&!1===t.enumerable)return!1}catch(e){}try{if(i(e))return!0;if(n(e)===n(window))return!0}catch(e){}return!1}function c(e){if(!a(e))return!1;try{if(i(e))return!0;if(o(window)===o(e))return!0}catch(e){}return!1}function u(e){if(e)try{if(e.parent&&e.parent!==e)return e.parent}catch(e){return}}function s(e){if(e&&!u(e))try{return e.opener}catch(e){return}}function f(e){var t=[];try{for(;e.parent!==e;)t.push(e.parent),e=e.parent}catch(e){}return t}function l(e,t){if(!e||!t)return!1;var r=u(t);return r?r===e:-1!==f(t).indexOf(e)}function d(e){var t=[],r=void 0;try{r=e.frames}catch(t){r=e}var n=void 0;try{n=r.length}catch(e){}if(0===n)return t;if(n){for(var o=0;o<n;o++){var i=void 0;try{i=r[o]}catch(e){continue}t.push(i)}return t}for(var a=0;a<100;a++){var c=void 0;try{c=r[a]}catch(e){return t}if(!c)return t;t.push(c)}return t}function p(e){var t=[],r=d(e),n=Array.isArray(r),o=0;for(r=n?r:r[Symbol.iterator]();;){var i;if(n){if(o>=r.length)break;i=r[o++]}else{if((o=r.next()).done)break;i=o.value}var a=i;t.push(a);var c=p(a),u=Array.isArray(c),s=0;for(c=u?c:c[Symbol.iterator]();;){var f;if(u){if(s>=c.length)break;f=c[s++]}else{if((s=c.next()).done)break;f=s.value}var l=f;t.push(l)}}return t}function w(e){if(e){try{if(e.top)return e.top}catch(e){}if(u(e)===e)return e;try{if(l(window,e)&&window.top)return window.top}catch(e){}try{if(l(e,window)&&window.top)return window.top}catch(e){}var t=p(e),r=Array.isArray(t),n=0;for(t=r?t:t[Symbol.iterator]();;){var o;if(r){if(n>=t.length)break;o=t[n++]}else{if((n=t.next()).done)break;o=n.value}var i=o;try{if(i.top)return i.top}catch(e){}if(u(i)===i)return i}}}function m(e){var t=w(e);return p(t).concat(t)}function v(e){return e===w(e)}function y(e){if(!e.contentWindow)return!0;if(!e.parentNode)return!0;var t=e.ownerDocument;return!(!t||!t.body||t.body.contains(e))}function h(e,t){for(var r=0;r<e.length;r++)try{if(e[r]===t)return r}catch(e){}return-1}function g(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{if(e===window)return!1}catch(e){return!0}try{if(!e)return!0}catch(e){return!0}try{if(e.closed)return!0}catch(e){return!e||e.message!==Z}if(t&&c(e))try{if(e.mockclosed)return!0}catch(e){}try{if(!e.parent||!e.top)return!0}catch(e){}try{(0,U.noop)(e==e)}catch(e){return!0}var r=h(z,e);if(-1!==r){var n=V[r];if(n&&y(n))return!0}return!1}function S(){for(var e=0;e<V.length;e++)y(V[e])&&(V.splice(e,1),z.splice(e,1));for(var t=0;t<z.length;t++)g(z[t])&&(V.splice(t,1),z.splice(t,1))}function O(e){if(S(),e&&e.contentWindow)try{z.push(e.contentWindow),V.push(e)}catch(e){}}function b(e){return(e=e||window).navigator.mockUserAgent||e.navigator.userAgent}function _(e,t){var r=d(e),n=r,o=Array.isArray(n),i=0;for(n=o?n:n[Symbol.iterator]();;){var a;if(o){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}var u=a;try{if(c(u)&&u.name===t&&-1!==r.indexOf(u))return u}catch(e){}}try{if(-1!==r.indexOf(e.frames[t]))return e.frames[t]}catch(e){}try{if(-1!==r.indexOf(e[t]))return e[t]}catch(e){}}function E(e,t){var r=_(e,t);if(r)return r;var n=d(e),o=Array.isArray(n),i=0;for(n=o?n:n[Symbol.iterator]();;){var a;if(o){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}var c=E(a,t);if(c)return c}}function P(e,t){var r=void 0;return(r=_(e,t))?r:E(w(e)||e,t)}function A(e,t){var r=u(t);if(r)return r===e;var n=d(e),o=Array.isArray(n),i=0;for(n=o?n:n[Symbol.iterator]();;){var a;if(o){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}if(a===t)return!0}return!1}function T(e,t){return e===s(t)}function N(e){var t=s(e=e||window);return t||u(e)||void 0}function C(e){for(var t=[],r=e;r;)(r=N(r))&&t.push(r);return t}function j(e,t){var r=N(t);if(r)return r===e;if(t===e)return!1;if(w(t)===t)return!1;var n=d(e),o=Array.isArray(n),i=0;for(n=o?n:n[Symbol.iterator]();;){var a;if(o){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}if(a===t)return!0}return!1}function k(){return Boolean(s(window))}function L(){return Boolean(u(window))}function M(){return Boolean(!L()&&!k())}function R(e,t){var r=e,n=Array.isArray(r),o=0;for(r=n?r:r[Symbol.iterator]();;){var i;if(n){if(o>=r.length)break;i=r[o++]}else{if((o=r.next()).done)break;i=o.value}var a=i,c=t,u=Array.isArray(c),s=0;for(c=u?c:c[Symbol.iterator]();;){var f;if(u){if(s>=c.length)break;f=c[s++]}else{if((s=c.next()).done)break;f=s.value}if(a===f)return!0}}return!1}function I(){for(var e=0,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;t;)(t=u(t))&&(e+=1);return e}function D(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=e,n=0;n<t;n++){if(!r)return;r=u(r)}return r}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return D(e,I(e)-t)}function W(e,t){var r=w(e)||e,n=w(t)||t;try{if(r&&n)return r===n}catch(e){}var o=m(e),i=m(t);if(R(o,i))return!0;var a=s(r),c=s(n);return!(a&&R(m(a),i)||(c&&R(m(c),o),1))}function G(e,t){if("string"==typeof e){if("string"==typeof t)return e===B.WILDCARD||t===e;if((0,U.isRegex)(t))return!1;if(Array.isArray(t))return!1}return(0,U.isRegex)(e)?(0,U.isRegex)(t)?e.toString()===t.toString():!Array.isArray(t)&&Boolean(t.match(e)):!!Array.isArray(e)&&(Array.isArray(t)?JSON.stringify(e)===JSON.stringify(t):!(0,U.isRegex)(t)&&e.some((function(e){return G(e,t)})))}function Y(e){return e.match(/^(https?|mock|file):\/\//)?e.split("/").slice(0,3).join("/"):o()}function F(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,o=void 0;return function i(){if(g(e))return o&&clearTimeout(o),t();n<=0?clearTimeout(o):(n-=r,o=setTimeout(i,r))}(),{cancel:function(){o&&clearTimeout(o)}}}function q(e){try{if(e===window)return!0}catch(e){if(e&&e.message===Z)return!0}try{if("[object Window]"===Object.prototype.toString.call(e))return!0}catch(e){if(e&&e.message===Z)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(e){if(e&&e.message===Z)return!0}try{if(e&&e.self===e)return!0}catch(e){if(e&&e.message===Z)return!0}try{if(e&&e.parent===e)return!0}catch(e){if(e&&e.message===Z)return!0}try{if(e&&e.top===e)return!0}catch(e){if(e&&e.message===Z)return!0}try{(0,U.noop)(e==e)}catch(e){return!0}try{(0,U.noop)(e&&e.__cross_domain_utils_window_check__)}catch(e){return!0}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.getActualDomain=n,t.getDomain=o,t.isBlankDomain=i,t.isActuallySameDomain=a,t.isSameDomain=c,t.getParent=u,t.getOpener=s,t.getParents=f,t.isAncestorParent=l,t.getFrames=d,t.getAllChildFrames=p,t.getTop=w,t.getAllFramesInWindow=m,t.isTop=v,t.isFrameWindowClosed=y,t.isWindowClosed=g,t.linkFrameWindow=O,t.getUserAgent=b,t.getFrameByName=_,t.findChildFrameByName=E,t.findFrameByName=P,t.isParent=A,t.isOpener=T,t.getAncestor=N,t.getAncestors=C,t.isAncestor=j,t.isPopup=k,t.isIframe=L,t.isFullpage=M,t.getDistanceFromTop=I,t.getNthParent=D,t.getNthParentFromTop=x,t.isSameTopWindow=W,t.matchDomain=G,t.getDomainFromUrl=Y,t.onCloseWindow=F,t.isWindow=q;var U=r(17),B={MOCK_PROTOCOL:"mock:",FILE_PROTOCOL:"file:",WILDCARD:"*"},Z="Call was rejected by callee.\r\n",z=[],V=[]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(19);Object.defineProperty(t,"ZalgoPromise",{enumerable:!0,get:function(){return n.ZalgoPromise}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.global=void 0;var n=r(0);(t.global=window[n.CONSTANTS.WINDOW_PROPS.POSTROBOT]=window[n.CONSTANTS.WINDOW_PROPS.POSTROBOT]||{}).registerSelf=function(){}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})}));var o=r(9);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})}));var i=r(28);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}));var a=r(27);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(13);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})}));var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n);t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(23);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})}));var o=r(12);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})}));var i=r(11);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}))},function(e,t,r){"use strict";function n(e){if(!e)return"<unknown error: "+Object.prototype.toString.call(e)+">";if("string"==typeof e)return e;if(e instanceof Error){var t=e&&e.stack,r=e&&e.message;if(t&&r)return-1!==t.indexOf(r)?t:r+"\n"+t;if(t)return t;if(r)return r}return"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e)}function o(){}function i(e,t,r){return e.addEventListener?e.addEventListener(t,r):e.attachEvent("on"+t,r),{cancel:function(){e.removeEventListener?e.removeEventListener(t,r):e.detachEvent("on"+t,r)}}}function a(){var e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,(function(){return e.charAt(Math.floor(Math.random()*e.length))}))}function c(e,t){for(var r=0;r<e.length;r++)t(e[r],r)}function u(e,t){for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)}function s(e,t){Array.isArray(e)?c(e,t):"object"===(void 0===e?"undefined":v(e))&&null!==e&&u(e,t)}function f(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(r>=100)throw new Error("Self-referential object passed, or object contained too many layers");var n=void 0;if("object"!==(void 0===e?"undefined":v(e))||null===e||Array.isArray(e)){if(!Array.isArray(e))throw new Error("Invalid type: "+(void 0===e?"undefined":v(e)));n=[]}else n={};return s(e,(function(e,o){var i=t(e,o);void 0!==i?n[o]=i:"object"===(void 0===e?"undefined":v(e))&&null!==e?n[o]=f(e,t,r+1):n[o]=e})),n}function l(e,t){function r(){n=setTimeout(r,t),e.call()}var n=void 0;return n=setTimeout(r,t),{cancel:function(){clearTimeout(n)}}}function d(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function p(){return(0,h.isPopup)()?g.CONSTANTS.WINDOW_TYPES.POPUP:(0,h.isIframe)()?g.CONSTANTS.WINDOW_TYPES.IFRAME:g.CONSTANTS.WINDOW_TYPES.FULLPAGE}function w(e,t,r){var n=void 0,o=void 0;try{if("{}"!==JSON.stringify({})&&(n=Object.prototype.toJSON,delete Object.prototype.toJSON),"{}"!==JSON.stringify({}))throw new Error("Can not correctly serialize JSON objects");if("[]"!==JSON.stringify([])&&(o=Array.prototype.toJSON,delete Array.prototype.toJSON),"[]"!==JSON.stringify([]))throw new Error("Can not correctly serialize JSON objects")}catch(e){throw new Error("Can not repair JSON.stringify: "+e.message)}var i=JSON.stringify.call(this,e,t,r);try{n&&(Object.prototype.toJSON=n),o&&(Array.prototype.toJSON=o)}catch(e){throw new Error("Can not repair JSON.stringify: "+e.message)}return i}function m(e){return JSON.parse(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.weakMapMemoize=t.once=void 0;var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.stringifyError=n,t.noop=o,t.addEventListener=i,t.uniqueID=a,t.eachArray=c,t.eachObject=u,t.each=s,t.replaceObject=f,t.safeInterval=l,t.isRegex=d,t.getWindowType=p,t.jsonStringify=w,t.jsonParse=m;var y=r(5),h=r(1),g=r(0);t.once=function(e){if(!e)return e;var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}},t.weakMapMemoize=function(e){var t=new y.WeakMap;return function(r){var n=t.get(r);return void 0!==n||void 0!==(n=e.call(this,r))&&t.set(r,n),n}}},function(e,t,r){"use strict";function n(){s.global.initialized||((0,u.listenForMessages)(),(0,c.initOnReady)(),(0,c.listenForMethods)()),s.global.initialized=!0}Object.defineProperty(t,"__esModule",{value:!0}),t.Promise=t.cleanUpWindow=void 0;var o=r(21);Object.defineProperty(t,"cleanUpWindow",{enumerable:!0,get:function(){return o.cleanUpWindow}}),t.init=n;var i=r(31);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}));var a=r(2);Object.defineProperty(t,"Promise",{enumerable:!0,get:function(){return a.ZalgoPromise}});var c=r(4),u=r(6),s=r(3);n()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(7),i=r(0),a=["debug","info","warn","error"];Function.prototype.bind&&window.console&&"object"===n(console.log)&&["log","info","warn","error"].forEach((function(e){console[e]=this.bind(console[e],console)}),Function.prototype.call);var c=t.log={clearLogs:function(){if(window.console&&window.console.clear&&window.console.clear(),i.CONFIG.LOG_TO_PAGE){var e=document.getElementById("postRobotLogs");e&&e.parentNode&&e.parentNode.removeChild(e)}},writeToPage:function(e,t){setTimeout((function(){var r=document.getElementById("postRobotLogs");r||((r=document.createElement("div")).id="postRobotLogs",r.style.cssText="width: 800px; font-family: monospace; white-space: pre-wrap;",document.body&&document.body.appendChild(r));var n=document.createElement("div"),i=(new Date).toString().split(" ")[4],a=Array.prototype.slice.call(t).map((function(e){if("string"==typeof e)return e;if(!e)return Object.prototype.toString.call(e);var t=void 0;try{t=(0,o.jsonStringify)(e,null,2)}catch(e){t="[object]"}return"\n\n"+t+"\n\n"})).join(" "),c=i+" "+e+" "+a;n.innerHTML=c;var u={log:"#ddd",warn:"orange",error:"red",info:"blue",debug:"#aaa"}[e];n.style.cssText="margin-top: 10px; color: "+u+";",r.childNodes.length?r.insertBefore(n,r.childNodes[0]):r.appendChild(n)}))},logLevel:function(e,t){setTimeout((function(){try{var r=window.LOG_LEVEL||i.CONFIG.LOG_LEVEL;if(a.indexOf(e)<a.indexOf(r))return;if((t=Array.prototype.slice.call(t)).unshift(""+window.location.host+window.location.pathname),t.unshift("::"),t.unshift(""+(0,o.getWindowType)().toLowerCase()),t.unshift("[post-robot]"),i.CONFIG.LOG_TO_PAGE&&c.writeToPage(e,t),!window.console)return;if(window.console[e]||(e="log"),!window.console[e])return;window.console[e].apply(window.console,t)}catch(e){}}),1)},debug:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];c.logLevel("debug",t)},info:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];c.logLevel("info",t)},warn:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];c.logLevel("warn",t)},error:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];c.logLevel("error",t)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.CONSTANTS={POST_MESSAGE_TYPE:{REQUEST:"postrobot_message_request",RESPONSE:"postrobot_message_response",ACK:"postrobot_message_ack"},POST_MESSAGE_ACK:{SUCCESS:"success",ERROR:"error"},POST_MESSAGE_NAMES:{METHOD:"postrobot_method",READY:"postrobot_ready",OPEN_TUNNEL:"postrobot_open_tunnel"},WINDOW_TYPES:{FULLPAGE:"fullpage",POPUP:"popup",IFRAME:"iframe"},WINDOW_PROPS:{POSTROBOT:"__postRobot__"},SERIALIZATION_TYPES:{METHOD:"postrobot_method",ERROR:"postrobot_error",PROMISE:"postrobot_promise",ZALGO_PROMISE:"postrobot_zalgo_promise",REGEX:"regex"},SEND_STRATEGIES:{POST_MESSAGE:"postrobot_post_message",BRIDGE:"postrobot_bridge",GLOBAL:"postrobot_global"},MOCK_PROTOCOL:"mock:",FILE_PROTOCOL:"file:",BRIDGE_NAME_PREFIX:"__postrobot_bridge__",POSTROBOT_PROXY:"__postrobot_proxy__",WILDCARD:"*"};t.POST_MESSAGE_NAMES_LIST=Object.keys(n.POST_MESSAGE_NAMES).map((function(e){return n.POST_MESSAGE_NAMES[e]}))},function(e,t,r){"use strict";function n(){l.global.responseListeners={},l.global.requestListeners={}}function o(e,t){l.global.responseListeners[e]=t}function i(e){return l.global.responseListeners[e]}function a(e){delete l.global.responseListeners[e]}function c(e){var t=e.name,r=e.win,n=e.domain;if(r===p.CONSTANTS.WILDCARD&&(r=null),n===p.CONSTANTS.WILDCARD&&(n=null),!t)throw new Error("Name required to get request listener");var o=l.global.requestListeners[t];if(o)for(var i=[r,l.global.WINDOW_WILDCARD],a=0;a<i.length;a++){var c=i[a],u=c&&o.get(c);if(u){if(n&&"string"==typeof n){if(u[n])return u[n];if(u[w]){var s=u[w],d=Array.isArray(s),m=0;for(s=d?s:s[Symbol.iterator]();;){var v;if(d){if(m>=s.length)break;v=s[m++]}else{if((m=s.next()).done)break;v=m.value}var y=v,h=y.regex,g=y.listener;if((0,f.matchDomain)(h,n))return g}}}if(u[p.CONSTANTS.WILDCARD])return u[p.CONSTANTS.WILDCARD]}}}function u(e,t){var r=e.name,n=e.win,o=e.domain;if(!r||"string"!=typeof r)throw new Error("Name required to add request listener");if(Array.isArray(n)){var i=[],a=n,f=Array.isArray(a),m=0;for(a=f?a:a[Symbol.iterator]();;){var v;if(f){if(m>=a.length)break;v=a[m++]}else{if((m=a.next()).done)break;v=m.value}var y=v;i.push(u({name:r,domain:o,win:y},t))}return{cancel:function(){var e=i,t=Array.isArray(e),r=0;for(e=t?e:e[Symbol.iterator]();;){var n;if(t){if(r>=e.length)break;n=e[r++]}else{if((r=e.next()).done)break;n=r.value}n.cancel()}}}}if(Array.isArray(o)){var h=[],g=o,S=Array.isArray(g),O=0;for(g=S?g:g[Symbol.iterator]();;){var b;if(S){if(O>=g.length)break;b=g[O++]}else{if((O=g.next()).done)break;b=O.value}var _=b;h.push(u({name:r,win:n,domain:_},t))}return{cancel:function(){var e=h,t=Array.isArray(e),r=0;for(e=t?e:e[Symbol.iterator]();;){var n;if(t){if(r>=e.length)break;n=e[r++]}else{if((r=e.next()).done)break;n=r.value}n.cancel()}}}}var E=c({name:r,win:n,domain:o});if(n&&n!==p.CONSTANTS.WILDCARD||(n=l.global.WINDOW_WILDCARD),o=o||p.CONSTANTS.WILDCARD,E)throw n&&o?new Error("Request listener already exists for "+r+" on domain "+o.toString()+" for specified window"):n?new Error("Request listener already exists for "+r+" for specified window"):o?new Error("Request listener already exists for "+r+" on domain "+o.toString()):new Error("Request listener already exists for "+r);var P=l.global.requestListeners,A=P[r];A||(A=new s.WeakMap,P[r]=A);var T=A.get(n);T||(T={},A.set(n,T));var N=o.toString(),C=T[w],j=void 0;return(0,d.isRegex)(o)?(C||(C=[],T[w]=C),j={regex:o,listener:t},C.push(j)):T[N]=t,{cancel:function(){T&&(delete T[N],n&&0===Object.keys(T).length&&A.delete(n),j&&C.splice(C.indexOf(j,1)))}}}Object.defineProperty(t,"__esModule",{value:!0}),t.resetListeners=n,t.addResponseListener=o,t.getResponseListener=i,t.deleteResponseListener=a,t.getRequestListener=c,t.addRequestListener=u,r(2);var s=r(5),f=r(1),l=r(3),d=r(4),p=r(0);l.global.responseListeners=l.global.responseListeners||{},l.global.requestListeners=l.global.requestListeners||{},l.global.WINDOW_WILDCARD=l.global.WINDOW_WILDCARD||new function(){};var w="__domain_regex__"},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(0,f.uniqueID)(),o=(0,f.getWindowType)(),i=(0,c.getDomain)(window);return a({},t,r,{sourceDomain:i,id:t.id||n,windowType:o})}function i(e,t,r){return u.ZalgoPromise.try((function(){t=o(e,t,{data:(0,f.serializeMethods)(e,r,t.data),domain:r});var i=void 0;if(i=-1!==s.POST_MESSAGE_NAMES_LIST.indexOf(t.name)||t.type===s.CONSTANTS.POST_MESSAGE_TYPE.ACK?"debug":"error"===t.ack?"error":"info",f.log.logLevel(i,["\n\n\t","#send",t.type.replace(/^postrobot_message_/,""),"::",t.name,"::",r||s.CONSTANTS.WILDCARD,"\n\n",t]),e===window)throw new Error("Attemping to send message to self");if((0,c.isWindowClosed)(e))throw new Error("Window is closed");f.log.debug("Running send message strategies",t);var a=[],d=(0,f.jsonStringify)(n({},s.CONSTANTS.WINDOW_PROPS.POSTROBOT,t),null,2);return u.ZalgoPromise.map(Object.keys(l.SEND_MESSAGE_STRATEGIES),(function(t){return u.ZalgoPromise.try((function(){if(!s.CONFIG.ALLOWED_POST_MESSAGE_METHODS[t])throw new Error("Strategy disallowed: "+t);return l.SEND_MESSAGE_STRATEGIES[t](e,d,r)})).then((function(){return a.push(t+": success"),!0}),(function(e){return a.push(t+": "+(0,f.stringifyError)(e)+"\n"),!1}))})).then((function(e){var r=e.some(Boolean),n=t.type+" "+t.name+" "+(r?"success":"error")+":\n  - "+a.join("\n  - ")+"\n";if(f.log.debug(n),!r)throw new Error(n)}))}))}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.sendMessage=i;var c=r(1),u=r(2),s=r(0),f=r(4),l=r(25)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(16);Object.defineProperty(t,"WeakMap",{enumerable:!0,get:function(){return n.CrossDomainSafeWeakMap}})},function(e,t,r){"use strict";function n(){if(!window.WeakMap)return!1;if(!window.Object.freeze)return!1;try{var e=new window.WeakMap,t={};return window.Object.freeze(t),e.set(t,"__testvalue__"),"__testvalue__"===e.get(t)}catch(e){return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.hasNativeWeakMap=n},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<e.length;r++)try{if(e[r]===t)return r}catch(e){}return-1}function o(){}Object.defineProperty(t,"__esModule",{value:!0}),t.safeIndexOf=n,t.noop=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.CrossDomainSafeWeakMap=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),a=r(14),c=r(15),u=Object.defineProperty,s=Date.now()%1e9;t.CrossDomainSafeWeakMap=function(){function e(){if(n(this,e),s+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+s,(0,a.hasNativeWeakMap)())try{this.weakmap=new window.WeakMap}catch(e){}this.keys=[],this.values=[]}return o(e,[{key:"_cleanupClosedWindows",value:function(){for(var e=this.weakmap,t=this.keys,r=0;r<t.length;r++){var n=t[r];if((0,i.isWindow)(n)&&(0,i.isWindowClosed)(n)){if(e)try{e.delete(n)}catch(e){}t.splice(r,1),this.values.splice(r,1),r-=1}}}},{key:"isSafeToReadWrite",value:function(e){if((0,i.isWindow)(e))return!1;try{(0,c.noop)(e&&e.self),(0,c.noop)(e&&e[this.name])}catch(e){return!1}return!0}},{key:"set",value:function(e,t){if(!e)throw new Error("WeakMap expected key");var r=this.weakmap;if(r)try{r.set(e,t)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var n=this.name,o=e[n];o&&o[0]===e?o[1]=t:u(e,n,{value:[e,t],writable:!0})}else{this._cleanupClosedWindows();var i=this.keys,a=this.values,s=(0,c.safeIndexOf)(i,e);-1===s?(i.push(e),a.push(t)):a[s]=t}}},{key:"get",value:function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(e))return t.get(e)}catch(e){delete this.weakmap}if(!this.isSafeToReadWrite(e)){this._cleanupClosedWindows();var r=this.keys,n=(0,c.safeIndexOf)(r,e);if(-1===n)return;return this.values[n]}var o=e[this.name];if(o&&o[0]===e)return o[1]}},{key:"delete",value:function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{t.delete(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var r=e[this.name];r&&r[0]===e&&(r[0]=r[1]=void 0)}else{this._cleanupClosedWindows();var n=this.keys,o=(0,c.safeIndexOf)(n,e);-1!==o&&(n.splice(o,1),this.values.splice(o,1))}}},{key:"has",value:function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{return t.has(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var r=e[this.name];return!(!r||r[0]!==e)}return this._cleanupClosedWindows(),-1!==(0,c.safeIndexOf)(this.keys,e)}}]),e}()},function(e,t,r){"use strict";function n(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function o(){}Object.defineProperty(t,"__esModule",{value:!0}),t.isRegex=n,t.noop=o},function(e,t,r){"use strict";function n(e){if(-1===a.indexOf(e)){a.push(e),setTimeout((function(){throw e}),1);for(var t=0;t<i.length;t++)i[t](e)}}function o(e){return i.push(e),{cancel:function(){i.splice(i.indexOf(e),1)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchPossiblyUnhandledError=n,t.onPossiblyUnhandledException=o;var i=[],a=[]},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ZalgoPromise=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(20),a=r(18),c=window.__zalgopromise__=window.__zalgopromise__||{flushPromises:[],activeCount:0},u=function(){function e(t){var r=this;if(n(this,e),this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],t){var o=void 0,i=void 0,a=!1,c=!1,u=!1;try{t((function(e){u?r.resolve(e):(a=!0,o=e)}),(function(e){u?r.reject(e):(c=!0,i=e)}))}catch(e){return void this.reject(e)}u=!0,a?this.resolve(o):c&&this.reject(i)}}return o(e,[{key:"resolve",value:function(e){if(this.resolved||this.rejected)return this;if((0,i.isPromise)(e))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=e,this.dispatch(),this}},{key:"reject",value:function(e){var t=this;if(this.resolved||this.rejected)return this;if((0,i.isPromise)(e))throw new Error("Can not reject promise with another promise");if(!e){var r=e&&"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e);e=new Error("Expected reject to be called with Error, got "+r)}return this.rejected=!0,this.error=e,this.errorHandled||setTimeout((function(){t.errorHandled||(0,a.dispatchPossiblyUnhandledError)(e)}),1),this.dispatch(),this}},{key:"asyncReject",value:function(e){this.errorHandled=!0,this.reject(e)}},{key:"dispatch",value:function(){var t=this,r=this.dispatching,n=this.resolved,o=this.rejected,a=this.handlers;if(!r&&(n||o)){this.dispatching=!0,c.activeCount+=1;for(var u=0;u<a.length;u++)!function(r){var c=a[r],u=c.onSuccess,s=c.onError,f=c.promise,l=void 0;if(n)try{l=u?u(t.value):t.value}catch(e){return f.reject(e),"continue"}else if(o){if(!s)return f.reject(t.error),"continue";try{l=s(t.error)}catch(e){return f.reject(e),"continue"}}l instanceof e&&(l.resolved||l.rejected)?(l.resolved?f.resolve(l.value):f.reject(l.error),l.errorHandled=!0):(0,i.isPromise)(l)?l instanceof e&&(l.resolved||l.rejected)?l.resolved?f.resolve(l.value):f.reject(l.error):l.then((function(e){f.resolve(e)}),(function(e){f.reject(e)})):f.resolve(l)}(u);a.length=0,this.dispatching=!1,c.activeCount-=1,0===c.activeCount&&e.flushQueue()}}},{key:"then",value:function(t,r){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.then expected a function for success handler");if(r&&"function"!=typeof r&&!r.call)throw new Error("Promise.then expected a function for error handler");var n=new e;return this.handlers.push({promise:n,onSuccess:t,onError:r}),this.errorHandled=!0,this.dispatch(),n}},{key:"catch",value:function(e){return this.then(void 0,e)}},{key:"finally",value:function(t){return this.then((function(r){return e.try(t).then((function(){return r}))}),(function(r){return e.try(t).then((function(){throw r}))}))}},{key:"timeout",value:function(e,t){var r=this;if(this.resolved||this.rejected)return this;var n=setTimeout((function(){r.resolved||r.rejected||r.reject(t||new Error("Promise timed out after "+e+"ms"))}),e);return this.then((function(e){return clearTimeout(n),e}))}},{key:"toPromise",value:function(){if(!window.Promise)throw new Error("Could not find window.Promise");return window.Promise.resolve(this)}}],[{key:"resolve",value:function(t){return t instanceof e?t:(0,i.isPromise)(t)?new e((function(e,r){return t.then(e,r)})):(new e).resolve(t)}},{key:"reject",value:function(t){return(new e).reject(t)}},{key:"all",value:function(t){var r=new e,n=t.length,o=[];if(!n)return r.resolve(o),r;for(var a=0;a<t.length;a++)!function(a){var c=t[a];if(c instanceof e){if(c.resolved)return o[a]=c.value,n-=1,"continue"}else if(!(0,i.isPromise)(c))return o[a]=c,n-=1,"continue";e.resolve(c).then((function(e){o[a]=e,0==(n-=1)&&r.resolve(o)}),(function(e){r.reject(e)}))}(a);return 0===n&&r.resolve(o),r}},{key:"map",value:function(t,r){var n=new e,o=t.length,i=[];if(!o)return n.resolve(i),n;for(var a=0;a<t.length;a++)!function(a){e.try((function(){return r(t[a])})).then((function(e){i[a]=e,0==(o-=1)&&n.resolve(i)}),(function(e){n.reject(e)}))}(a);return n}},{key:"onPossiblyUnhandledException",value:function(e){return(0,a.onPossiblyUnhandledException)(e)}},{key:"try",value:function(t,r,n){var o=void 0;try{o=t.apply(r,n||[])}catch(t){return e.reject(t)}return e.resolve(o)}},{key:"delay",value:function(t){return new e((function(e){setTimeout(e,t)}))}},{key:"hash",value:function(t){var r={},n=[];for(var o in t)!function(o){t.hasOwnProperty(o)&&n.push(e.resolve(t[o]).then((function(e){r[o]=e})))}(o);return e.all(n).then((function(){return r}))}},{key:"isPromise",value:function(t){return!!(t&&t instanceof e)||(0,i.isPromise)(t)}},{key:"flush",value:function(){var t=new e;return c.flushPromises.push(t),0===c.activeCount&&e.flushQueue(),t}},{key:"flushQueue",value:function(){var e=c.flushPromises;c.flushPromises=[];var t=e,r=Array.isArray(t),n=0;for(t=r?t:t[Symbol.iterator]();;){var o;if(r){if(n>=t.length)break;o=t[n++]}else{if((n=t.next()).done)break;o=n.value}o.resolve()}}}]),e}();t.ZalgoPromise=u},function(e,t,r){"use strict";function n(e){try{if(!e)return!1;if(window.Promise&&e instanceof window.Promise)return!0;if(window.Window&&e instanceof window.Window)return!1;if(window.constructor&&e instanceof window.constructor)return!1;if(o){var t=o.call(e);if("[object Window]"===t||"[object global]"===t||"[object DOMWindow]"===t)return!1}if("function"==typeof e.then)return!0}catch(e){return!1}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.isPromise=n;var o={}.toString},function(e,t,r){"use strict";function n(e){var t=o.global.requestPromises.get(e);if(t){var r=t,n=Array.isArray(r),i=0;for(r=n?r:r[Symbol.iterator]();;){var a;if(n){if(i>=r.length)break;a=r[i++]}else{if((i=r.next()).done)break;a=i.value}a.reject(new Error("No response from window - cleaned up"))}}o.global.popupWindowsByWin&&o.global.popupWindowsByWin.delete(e),o.global.remoteWindows&&o.global.remoteWindows.delete(e),o.global.requestPromises.delete(e),o.global.methods.delete(e),o.global.readyPromises.delete(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.cleanUpWindow=n;var o=r(3)},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.CONFIG=void 0;var o,i=r(10),a=t.CONFIG={ALLOW_POSTMESSAGE_POPUP:!0,LOG_LEVEL:"info",BRIDGE_TIMEOUT:5e3,ACK_TIMEOUT:1e3,RES_TIMEOUT:1/0,LOG_TO_PAGE:!1,ALLOWED_POST_MESSAGE_METHODS:(o={},n(o,i.CONSTANTS.SEND_STRATEGIES.POST_MESSAGE,!0),n(o,i.CONSTANTS.SEND_STRATEGIES.BRIDGE,!0),n(o,i.CONSTANTS.SEND_STRATEGIES.GLOBAL,!0),o)};0===window.location.href.indexOf(i.CONSTANTS.FILE_PROTOCOL)&&(a.ALLOW_POSTMESSAGE_POPUP=!0)},function(e,t,r){"use strict";function n(e){var t=void 0;try{t=(0,f.jsonParse)(e)}catch(e){return}if(t&&"object"===(void 0===t?"undefined":c(t))&&null!==t&&(t=t[s.CONSTANTS.WINDOW_PROPS.POSTROBOT])&&"object"===(void 0===t?"undefined":c(t))&&null!==t&&t.type&&"string"==typeof t.type&&d.RECEIVE_MESSAGE_TYPES[t.type])return t}function o(e){if(!window||window.closed)throw new Error("Message recieved in closed window");try{if(!e.source)return}catch(e){return}var t=e.source,r=e.origin,o=n(e.data);if(o){if(!o.sourceDomain||"string"!=typeof o.sourceDomain)throw new Error("Expected message to have sourceDomain");if(0!==o.sourceDomain.indexOf(s.CONSTANTS.MOCK_PROTOCOL)&&0!==o.sourceDomain.indexOf(s.CONSTANTS.FILE_PROTOCOL)||(r=o.sourceDomain),-1===l.global.receivedMessages.indexOf(o.id)){l.global.receivedMessages.push(o.id);var i=void 0;if(i=-1!==s.POST_MESSAGE_NAMES_LIST.indexOf(o.name)||o.type===s.CONSTANTS.POST_MESSAGE_TYPE.ACK?"debug":"error"===o.ack?"error":"info",f.log.logLevel(i,["\n\n\t","#receive",o.type.replace(/^postrobot_message_/,""),"::",o.name,"::",r,"\n\n",o]),(0,u.isWindowClosed)(t))return void f.log.debug("Source window is closed - can not send "+o.type+" "+o.name);o.data&&(o.data=(0,f.deserializeMethods)(t,r,o.data)),d.RECEIVE_MESSAGE_TYPES[o.type](t,r,o)}}}function i(e){try{e.source}catch(e){return}o({source:e.source||e.sourceElement,origin:e.origin||e.originalEvent&&e.originalEvent.origin,data:e.data})}function a(){(0,f.addEventListener)(window,"message",i)}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.receiveMessage=o,t.messageListener=i,t.listenForMessages=a;var u=r(1),s=r(0),f=r(4),l=r(3),d=r(24);l.global.receivedMessages=l.global.receivedMessages||[]},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.RECEIVE_MESSAGE_TYPES=void 0;var o,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(2),c=r(1),u=r(0),s=r(4),f=r(12),l=r(11);t.RECEIVE_MESSAGE_TYPES=(n(o={},u.CONSTANTS.POST_MESSAGE_TYPE.ACK,(function(e,t,r){var n=(0,l.getResponseListener)(r.hash);if(!n)throw new Error("No handler found for post message ack for message: "+r.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!(0,c.matchDomain)(n.domain,t))throw new Error("Ack origin "+t+" does not match domain "+n.domain.toString());n.ack=!0})),n(o,u.CONSTANTS.POST_MESSAGE_TYPE.REQUEST,(function(e,t,r){function n(n){return r.fireAndForget||(0,c.isWindowClosed)(e)?a.ZalgoPromise.resolve():(0,f.sendMessage)(e,i({target:r.originalSource,hash:r.hash,name:r.name},n),t)}var o=(0,l.getRequestListener)({name:r.name,win:e,domain:t});return a.ZalgoPromise.all([n({type:u.CONSTANTS.POST_MESSAGE_TYPE.ACK}),a.ZalgoPromise.try((function(){if(!o)throw new Error("No handler found for post message: "+r.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!(0,c.matchDomain)(o.domain,t))throw new Error("Request origin "+t+" does not match domain "+o.domain.toString());var n=r.data;return o.handler({source:e,origin:t,data:n})})).then((function(e){return n({type:u.CONSTANTS.POST_MESSAGE_TYPE.RESPONSE,ack:u.CONSTANTS.POST_MESSAGE_ACK.SUCCESS,data:e})}),(function(e){var t=(0,s.stringifyError)(e).replace(/^Error: /,"");return n({type:u.CONSTANTS.POST_MESSAGE_TYPE.RESPONSE,ack:u.CONSTANTS.POST_MESSAGE_ACK.ERROR,error:t})}))]).then(s.noop).catch((function(e){if(o&&o.handleError)return o.handleError(e);s.log.error((0,s.stringifyError)(e))}))})),n(o,u.CONSTANTS.POST_MESSAGE_TYPE.RESPONSE,(function(e,t,r){var n=(0,l.getResponseListener)(r.hash);if(!n)throw new Error("No handler found for post message response for message: "+r.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!(0,c.matchDomain)(n.domain,t))throw new Error("Response origin "+t+" does not match domain "+n.domain);if((0,l.deleteResponseListener)(r.hash),r.ack===u.CONSTANTS.POST_MESSAGE_ACK.ERROR)return n.respond(new Error(r.error),null);if(r.ack===u.CONSTANTS.POST_MESSAGE_ACK.SUCCESS){var o=r.data||r.response;return n.respond(null,{source:e,origin:t,data:o})}})),o)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SEND_MESSAGE_STRATEGIES=void 0;var n=r(1),o=r(0);(t.SEND_MESSAGE_STRATEGIES={})[o.CONSTANTS.SEND_STRATEGIES.POST_MESSAGE]=function(e,t,r){(Array.isArray(r)?r:r?[r]:[o.CONSTANTS.WILDCARD]).map((function(t){if(0===t.indexOf(o.CONSTANTS.MOCK_PROTOCOL)){if(window.location.protocol===o.CONSTANTS.FILE_PROTOCOL)return o.CONSTANTS.WILDCARD;if(!(0,n.isActuallySameDomain)(e))throw new Error("Attempting to send messsage to mock domain "+t+", but window is actually cross-domain");return(0,n.getActualDomain)(e)}return 0===t.indexOf(o.CONSTANTS.FILE_PROTOCOL)?o.CONSTANTS.WILDCARD:t})).forEach((function(r){return e.postMessage(t,r)}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})}));var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n);t.default=o},function(e,t,r){"use strict";function n(){(0,s.on)(u.CONSTANTS.POST_MESSAGE_NAMES.READY,{domain:u.CONSTANTS.WILDCARD},(function(e){var t=e.source,r=l.global.readyPromises.get(t);r?r.resolve(e):(r=(new c.ZalgoPromise).resolve(e),l.global.readyPromises.set(t,r))}));var e=(0,a.getAncestor)();e&&(0,s.send)(e,u.CONSTANTS.POST_MESSAGE_NAMES.READY,{},{domain:u.CONSTANTS.WILDCARD,timeout:1/0}).catch((function(e){f.log.debug((0,d.stringifyError)(e))}))}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Window",n=l.global.readyPromises.get(e);return n||(n=new c.ZalgoPromise,l.global.readyPromises.set(e,n),setTimeout((function(){return n.reject(new Error(r+" did not load after "+t+"ms"))}),t),n)}Object.defineProperty(t,"__esModule",{value:!0}),t.initOnReady=n,t.onWindowReady=o;var i=r(5),a=r(1),c=r(2),u=r(0),s=r(8),f=r(9),l=r(3),d=r(7);l.global.readyPromises=l.global.readyPromises||new i.WeakMap},function(e,t,r){"use strict";function n(e,t){return"object"===(void 0===e?"undefined":v(e))&&null!==e&&e.__type__===t}function o(e,t,r,n){var o=(0,O.uniqueID)(),i=E.global.methods.get(e);return i||(i={},E.global.methods.set(e,i)),i[o]={domain:t,method:r},{__type__:S.CONSTANTS.SERIALIZATION_TYPES.METHOD,__id__:o,__name__:n}}function i(e){return{__type__:S.CONSTANTS.SERIALIZATION_TYPES.ERROR,__message__:(0,O.stringifyError)(e)}}function a(e,t,r,n){return{__type__:S.CONSTANTS.SERIALIZATION_TYPES.PROMISE,__then__:o(e,t,(function(e,t){return r.then(e,t)}),n+".then")}}function c(e,t,r,n){return{__type__:S.CONSTANTS.SERIALIZATION_TYPES.ZALGO_PROMISE,__then__:o(e,t,(function(e,t){return r.then(e,t)}),n+".then")}}function u(e){return{__type__:S.CONSTANTS.SERIALIZATION_TYPES.REGEX,__source__:e.source}}function s(e,t,r){return(0,O.replaceObject)({obj:r},(function(r,n){return"function"==typeof r?o(e,t,r,n.toString()):r instanceof Error?i(r):window.Promise&&r instanceof window.Promise?a(e,t,r,n.toString()):g.ZalgoPromise.isPromise(r)?c(e,t,r,n.toString()):(0,O.isRegex)(r)?u(r):void 0})).obj}function f(e,t,r){function n(){var n=Array.prototype.slice.call(arguments);return _.log.debug("Call foreign method",r.__name__,n),(0,b.send)(e,S.CONSTANTS.POST_MESSAGE_NAMES.METHOD,{id:r.__id__,name:r.__name__,args:n},{domain:t,timeout:1/0}).then((function(e){var t=e.data;return _.log.debug("Got foreign method result",r.__name__,t.result),t.result}),(function(e){throw _.log.debug("Got foreign method error",(0,O.stringifyError)(e)),e}))}return n.__name__=r.__name__,n.__xdomain__=!0,n.source=e,n.origin=t,n}function l(e,t,r){return new Error(r.__message__)}function d(e,t,r){return new g.ZalgoPromise((function(n,o){return f(e,t,r.__then__)(n,o)}))}function p(e,t,r){return window.Promise?new window.Promise((function(n,o){return f(e,t,r.__then__)(n,o)})):d(e,t,r)}function w(e,t,r){return new RegExp(r.__source__)}function m(e,t,r){return(0,O.replaceObject)({obj:r},(function(r,o){if("object"===(void 0===r?"undefined":v(r))&&null!==r)return n(r,S.CONSTANTS.SERIALIZATION_TYPES.METHOD)?f(e,t,r):n(r,S.CONSTANTS.SERIALIZATION_TYPES.ERROR)?l(e,t,r):n(r,S.CONSTANTS.SERIALIZATION_TYPES.PROMISE)?p(e,t,r):n(r,S.CONSTANTS.SERIALIZATION_TYPES.ZALGO_PROMISE)?d(e,t,r):n(r,S.CONSTANTS.SERIALIZATION_TYPES.REGEX)?w(e,t,r):void 0})).obj}Object.defineProperty(t,"__esModule",{value:!0}),t.listenForMethods=void 0;var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.serializeMethod=o,t.serializeMethods=s,t.deserializeMethod=f,t.deserializeError=l,t.deserializeZalgoPromise=d,t.deserializePromise=p,t.deserializeRegex=w,t.deserializeMethods=m;var y=r(5),h=r(1),g=r(2),S=r(0),O=r(7),b=r(8),_=r(9),E=r(3);E.global.methods=E.global.methods||new y.WeakMap,t.listenForMethods=(0,O.once)((function(){(0,b.on)(S.CONSTANTS.POST_MESSAGE_NAMES.METHOD,{origin:S.CONSTANTS.WILDCARD},(function(e){var t=e.source,r=e.origin,n=e.data,o=E.global.methods.get(t);if(!o)throw new Error("Could not find any methods this window has privileges to call");var i=o[n.id];if(!i)throw new Error("Could not find method with id: "+n.id);if(!(0,h.matchDomain)(i.domain,r))throw new Error("Method domain "+i.domain+" does not match origin "+r);return _.log.debug("Call local method",n.name,n.args),g.ZalgoPromise.try((function(){return i.method.apply({source:t,origin:r,data:n},n.args)})).then((function(e){return{result:e,id:n.id,name:n.name}}))}))}))},function(e,t,r){"use strict";function n(e){return u.ZalgoPromise.try((function(){if(!e.name)throw new Error("Expected options.name");var t=e.name,r=void 0,n=void 0;if("string"==typeof e.window){var o=document.getElementById(e.window);if(!o)throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be a valid element id");if("iframe"!==o.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be an iframe");if(!o.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");r=o.contentWindow}else if(e.window instanceof HTMLIFrameElement){if("iframe"!==e.window.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be an iframe");if(e.window&&!e.window.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");e.window&&e.window.contentWindow&&(r=e.window.contentWindow)}else r=e.window;if(!r)throw new Error("Expected options.window to be a window object, iframe, or iframe element id.");var i=r;n=e.domain||f.CONSTANTS.WILDCARD;var a=e.name+"_"+(0,d.uniqueID)();if((0,s.isWindowClosed)(i))throw new Error("Target window is closed");var c=!1,w=p.global.requestPromises.get(i);w||(w=[],p.global.requestPromises.set(i,w));var m=u.ZalgoPromise.try((function(){if((0,s.isAncestor)(window,i))return u.ZalgoPromise.resolve((0,d.onWindowReady)(i))})).then((function(){return new u.ZalgoPromise((function(r,o){var u={name:t,window:i,domain:n,respond:function(e,t){e||(c=!0,w.splice(w.indexOf(m,1))),e?o(e):r(t)}};if((0,l.addResponseListener)(a,u),(0,l.sendMessage)(i,{type:f.CONSTANTS.POST_MESSAGE_TYPE.REQUEST,hash:a,name:t,data:e.data,fireAndForget:e.fireAndForget},n).catch(o),e.fireAndForget)return r();var d=f.CONFIG.ACK_TIMEOUT,p=e.timeout||f.CONFIG.RES_TIMEOUT,v=100,y=function r(){if(!c){if((0,s.isWindowClosed)(i))return o(u.ack?new Error("Window closed for "+t+" before response"):new Error("Window closed for "+t+" before ack"));if(d-=v,p-=v,u.ack){if(p===1/0)return;v=Math.min(p,2e3)}else{if(d<=0)return o(new Error("No ack for postMessage "+t+" in "+f.CONFIG.ACK_TIMEOUT+"ms"));if(p<=0)return o(new Error("No response for postMessage "+t+" in "+(e.timeout||f.CONFIG.RES_TIMEOUT)+"ms"))}setTimeout(r,v)}};setTimeout(y,v)}))}));return m.catch((function(){(0,l.deleteResponseListener)(a)})),w.push(m),m}))}function o(e,t,r,o){return(o=o||{}).window=e,o.name=t,o.data=r,n(o)}function i(e,t,r){var n=(0,s.getAncestor)();return n?o(n,e,t,r):new u.ZalgoPromise((function(e,t){return t(new Error("Window does not have a parent"))}))}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.window)throw new Error("Expected options.window");var t=e.window;return{send:function(r,n){return o(t,r,n,e)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.send=void 0,t.request=n,t.sendToParent=i,t.client=a;var c=r(5),u=r(2),s=r(1),f=r(0),l=r(6),d=r(4),p=r(3);p.global.requestPromises=p.global.requestPromises||new c.WeakMap,t.send=o},function(e,t,r){"use strict";function n(){delete window[o.CONSTANTS.WINDOW_PROPS.POSTROBOT],window.removeEventListener("message",i.messageListener)}Object.defineProperty(t,"__esModule",{value:!0}),t.CONSTANTS=t.CONFIG=void 0;var o=r(0);Object.defineProperty(t,"CONFIG",{enumerable:!0,get:function(){return o.CONFIG}}),Object.defineProperty(t,"CONSTANTS",{enumerable:!0,get:function(){return o.CONSTANTS}}),t.disable=n;var i=r(6)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bridge=t.parent=void 0;var n=r(29);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})}));var o=r(32);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})}));var i=r(30);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}));var a=r(1);t.parent=(0,a.getAncestor)(),t.bridge=void 0},function(e,t,r){"use strict";function n(e){if(!e.name)throw new Error("Expected options.name");if(!e.handler)throw new Error("Expected options.handler");var t=e.name,r=e.window,n=e.domain,o={handler:e.handler,handleError:e.errorHandler||function(e){throw e},window:r,domain:n||d.CONSTANTS.WILDCARD,name:t},i=(0,l.addRequestListener)({name:t,win:r,domain:n},o);if(e.once){var a=o.handler;o.handler=(0,f.once)((function(){return i.cancel(),a.apply(this,arguments)}))}if(o.window&&e.errorOnClose)var s=(0,f.safeInterval)((function(){r&&"object"===(void 0===r?"undefined":c(r))&&(0,u.isWindowClosed)(r)&&(s.cancel(),o.handleError(new Error("Post message target window is closed")))}),50);return{cancel:function(){i.cancel()}}}function o(e,t,r){return"function"==typeof t&&(r=t,t={}),(t=t||{}).name=e,t.handler=r||t.handler,n(t)}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];"function"==typeof t&&(r=t,t={}),t=t||{},r=r||t.handler;var o=t.errorHandler,i=new s.ZalgoPromise((function(n,i){(t=t||{}).name=e,t.once=!0,t.handler=function(e){if(n(e),r)return r(e)},t.errorHandler=function(e){if(i(e),o)return o(e)}})),a=n(t);return i.cancel=a.cancel,i}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{on:function(t,r){return o(t,e,r)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.on=void 0;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.listen=n,t.once=i,t.listener=a;var u=r(1),s=r(2),f=r(4),l=r(6),d=r(0);t.on=o}])},727:function(e,t,r){e.exports=r(957),e.exports.default=e.exports},327:function(e){for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var n=r||0,o=t;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},217:function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},171:function(e,t,r){var n=r(217),o=r(327);e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var c=0;c<16;++c)t[i+c]=a[c];return t||o(a)}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=function(e){if("string"!=typeof e)throw new Error("actions.init() called without valid `propertyId`");if(void 0===window.PAYPAL||void 0===window.PAYPAL.muse)throw new Error("actions.init() expects `window.PAYPAL.muse` to be defined");window.PAYPAL.muse.propertyId=e},t=function(){return"error"},n=function(e,t){if(e&&t){var r=[];for(var n in t)t.hasOwnProperty(n)&&r.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n])));r=r.join("&"),(new window.Image).src="".concat(e,"?").concat(r)}};function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function(e){return Object.keys(e).reduce((function(t,r){return e[r]||!1===e[r]||0===e[r]?i(i({},t),{},a({},r,e[r])):t}),{})},u=function(e){return i({identifier:"musenodeweb",website:"muse",feature:"third-party",s:"ci",fltp:"",subfeature1:"",subfeature2:"",sub_component:"",pageType:"",userType:"",flavor:"",es:"",testVariant:"",link:"",erpg:"",flag_consume:"",correlation_id:""},e)},s=function(e){return{pgrp:[e.website,e.feature,e.subfeature1,e.subfeature2,e.pageType].join(":"),page:[e.website,e.feature,e.subfeature1,e.subfeature2,e.pageType,e.userType,e.flavor,e.testVariant].join(":"),tsrce:e.identifier,comp:e.identifier,sub_component:e.sub_component,s:e.s,item:e.item,fltp:e.fltp,sbfl:e.sbfl,link:e.link,es:e.flavor,cust:e.cust,mrid:e.mrid,erpg:e.erpg,error_code:e.error_code,xe:e.xe,xt:e.xt,qe:e.qe,qt:e.qt,flag_consume:e.flag_consume,correlation_id:e.correlation_id}},f=["pageView","click","serverCall"],l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o="//t.paypal.com/ts",a=!!~f.indexOf(e);if(a&&o){var l=s(u(t)),d=i(i(i({},l),{},{e:"pageView"===e?"im":"cl"},"click"===e?{pglk:"".concat(l.pgrp,"|").concat(l.link),pgln:"".concat(l.page,"|").concat(l.link)}:{}),{},{t:Date.now(),g:(new Date).getTimezoneOffset()},r);n(o,c(d))}},d=r(808),p=r.n(d),w="paypal-offers",m="__cr",v=function(){return document.location.hostname},y=function(e){if(!e)return!1;var t=e,r=e.split("."),n=r.length;if(n<2)return!1;var o=r[n-2],i=r[n-1];return!(!o.length||!i.length)&&(n>2&&(t="".concat(o,".").concat(i),2===o.length&&2===i.length&&(t="".concat(r[n-3],".").concat(t))),t)},h=function(){var e=v(),t=y(e);return t?{domain:t}:{}},g=r(727),S=r.n(g);S().CONFIG.LOG_LEVEL=t();var O=S();function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P,A=function(e){var t,r=document.getElementById("".concat(w,"--iframe-").concat(e)).contentWindow,n=!1;return function(){if(!n&&(n=!0,r.parent))try{O.send(r,"".concat(w,":scrollEvent"))}catch(e){}t&&clearTimeout(t),t=setTimeout((function(){n=!1}),1e3)}},T=function(e){var t=document.getElementById("".concat(w,"--iframe-").concat(e)).contentWindow;return function(){if(t.parent)try{O.send(t,"".concat(w,":verticalSwipeEvent"))}catch(e){}}},N=function(e){e&&e.parentNode.removeChild(e)},C=function(e){window.PAYPAL&&window.PAYPAL.muse&&window.PAYPAL.muse.timeouts&&(clearTimeout(window.PAYPAL.muse.timeouts[e]),delete window.PAYPAL.muse.timeouts[e])},j=function(e){var t;if(window.removeEventListener("scroll",P),e){var r=document.getElementById("".concat(w,"--iframe-").concat(e));return N(r),(t=document.querySelectorAll("style.".concat(w,"--styles-").concat(e)))&&Array.prototype.slice.call(t).forEach((function(e){return e.parentNode.removeChild(e)})),void C(e)}(t=document.querySelectorAll('style[class^="'.concat(w,'--styles-"]')))&&Array.prototype.slice.call(t).forEach((function(e){return e.parentNode.removeChild(e)}));var n=document.querySelectorAll('iframe[id^="'.concat(w,'--iframe-"]'));n&&Array.prototype.slice.call(n).forEach((function(e){N(e),C(e.getAttribute("id"))})),window.PAYPAL&&window.PAYPAL.muse&&window.PAYPAL.muse.timeouts&&(Object.keys(window.PAYPAL.muse.timeouts).forEach((function(e){clearTimeout(window.PAYPAL.muse.timeouts[e])})),delete window.PAYPAL.muse.timeouts)},k={clean:j,getCleanListener:function(e){return function(){return j(e)}},attachScrollListener:function(e){P=A(e),setTimeout((function(){window.addEventListener("scroll",P,{passive:!0})}),500)},attachVerticalSwipeListener:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n=document.querySelector("body"),o=T(e);setTimeout((function(){n.addEventListener("touchstart",(function(e){t=e.touches[0].pageY}),{passive:!0}),n.addEventListener("touchmove",(function(e){var n=e.touches[0].pageY;Math.abs(n-t)>r&&(o(),t=n)}),{passive:!0})}),500)},generateSetDismissCookie:function(e){return function(){var t=(e||{}).dismissCookieAge;if(0!==t){var r=_(_({},h()),{},{expires:t||1});p().set("".concat(w,"--dismissOffer"),"true",r)}}},shouldCap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.limit)return!1;var t=e.limit,r=e.flow||"",n="".concat(w,"--view-count").concat(r?"-".concat(r):""),o=_(_({},h()),{},{expires:1,samesite:"strict",secure:!0}),i=parseInt(p().get(n),10)||0;return!(i<t)||(p().set(n,++i,o),!1)},getModifyClassListener:function(e){return function(t){var r=document.getElementById("".concat(w,"--iframe-").concat(e));r&&(r.className=t)}},getCreateStyleTagListener:function(e){return function(t){var r=document.createElement("style");r.setAttribute("type","text/css"),r.setAttribute("class","".concat(w,"--styles-").concat(e)),r.appendChild(document.createTextNode(t)),document.head.appendChild(r)}},track:function(e){if(e&&e.track){var t=_(_({},e.track.overrides),{feature:"offer"}),r={fltp:e.track.overrides&&e.track.overrides.subfeature1};e.track.overrides&&e.track.overrides.sub_component&&(r.sub_component=e.track.overrides.sub_component),Y.track(e.track.eventType,t,r)}},flowDataFetched:function(e){e&&e.tracking&&function(e){if(e&&window.fpti){var t=e.xe||"",r=e.xt||"",n=e.qc||"",o=e.qt||"";window.fpti.xe=window.fpti.xe?window.fpti.xe+=",".concat(t):t,window.fpti.xt=window.fpti.xt?window.fpti.xt+=",".concat(r):r,window.fpti.qc=window.fpti.qc?window.fpti.qc+=",".concat(n):n,window.fpti.qt=window.fpti.qt?window.fpti.qt+=",".concat(o):o}}(e.tracking)},saveToLocalStorage:function(e){window.localStorage.setItem("".concat("paypal","--").concat(e.name),e.payload)},log:function(e){Y.log(e)},addClassToDocument:function(e){var t=document.body.className,r=document.documentElement.className;document.body.className="".concat(t," ").concat(e).trim(),document.documentElement.className="".concat(r," ").concat(e).trim()},removeClassFromDocument:function(e){var t=document.body.className,r=document.documentElement.className;document.body.className=t.replace(e,"").trim(),document.documentElement.className=r.replace(e,"").trim()},setWindowVariable:function(e){window[e.name]=e.value}},L=function(){if(window.__ppdebug)return!0===window.__ppdebug;var e=!1;try{e=!!~window.location.href.indexOf("ppdebug=1")}catch(e){}return e},M=r(171),R={uuidv4:r.n(M)()};function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var W={_getConnectionStartedListener:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k.track({track:{eventType:"pageView",overrides:D({flavor:"connectionStarted"},t.overrides)}}),t.attachScrollListener&&k.attachScrollListener(e),t.attachVerticalSwipeListener&&k.attachVerticalSwipeListener(e),window.PAYPAL&&window.PAYPAL.muse&&window.PAYPAL.muse.timeouts&&(clearTimeout(window.PAYPAL.muse.timeouts[e]),delete window.PAYPAL.muse.timeouts[e])}},_getFrameSource:function(e,t,r,n){var o="".concat(e,"#frameId=").concat(t)+"".concat(r?"&propertyId=".concat(r):"")+"".concat(L()?"&ppdebug=1":"");for(var i in n)"function"!=typeof n[i]&&(o+="&".concat(i,"=").concat(n[i]));return o},_getIFrame:function(e,t,r,n){var o=document.createElement("iframe"),i=W._getFrameSource(e,t,r,n);return o.style.zIndex="999999999999999999999999999999999999999999999",o.style.display="none",o.id="".concat(w,"--iframe-").concat(t),o.src=i,o.dataset&&(o.dataset.merchant=r),o},_attachListeners:function(e,t){var r=k.getModifyClassListener,n=k.generateSetDismissCookie,o=k.getCreateStyleTagListener,i=k.track,a=k.flowDataFetched,c=k.log,u=k.saveToLocalStorage,s=k.addClassToDocument,f=k.removeClassFromDocument,l=k.setWindowVariable,d={clean:(0,k.getCleanListener)(e),modifyClass:r(e),createStyleTag:o(e),setDismissCookie:n(t),connectionStarted:W._getConnectionStartedListener(e),track:function(e){i(e),t.handleEvents&&t.handleEvents(e)},getBrowserDimensions:function(e){try{var t=document.innerWidth?document.innerWidth:document.body.clientWidth;e(null,{height:document.innerHeight?document.innerHeight:document.body.clientHeight,width:t})}catch(t){e(t,null)}},flowDataFetched:a,log:c,saveToLocalStorage:u,addClassToDocument:s,removeClassFromDocument:f,setWindowVariable:l};Object.keys(d).forEach((function(t){O.on("".concat(w,":").concat(e,":").concat(t),(function(e){var r=e.data;d[t](r)}))}));var p=W._setSelfDestructTimer(25e3,d.clean);window.PAYPAL.muse.timeouts||(window.PAYPAL.muse.timeouts={}),window.PAYPAL.muse.timeouts[e]=p},_attachPublishers:function(e,t){var r=function(r){return O.send(t,"".concat(w,":").concat(e,":").concat(r)).catch((function(e){}))};window.PAYPAL.muse.show=function(){return r("show")},window.PAYPAL.muse.hide=function(){return r("hide")}},_render:function(e,t,r){var n=function(e){if(e){if(e.iframeId)return e.iframeId;if("cart-recovery"===e.flow||"cart-recovery-experiment"===e.flow)return m}return R.uuidv4()}(r);W._attachListeners(n,r);var o=W._getIFrame(e,n,window.PAYPAL.muse.propertyId,r),i="string"==typeof t?document.querySelector(t):t;i&&i.appendChild&&(W._attachPublishers(n,o),i.appendChild(o))},_setSelfDestructTimer:function(e,t){return setTimeout((function(){L(),t()}),e)},render:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&t&&window.PAYPAL&&window.PAYPAL.muse&&"true"!==p().get("".concat(w,"--dismissOffer"))&&(r.limit&&k.shouldCap(r)||W._render(e,t,r))}},G={update:function(e){O.send(document.getElementById("".concat(w,"--iframe-").concat(m)),"".concat(w,":listenToUpdates"),e).catch((function(e){k.clean(m)}))}},Y={init:e,track:l,log:function(){},clean:k.clean,showExperience:W.render,updateExperience:G.update},F=function(){if("undefined"!=typeof window&&"string"==typeof window.PaypalOffersObject){var e=window.PAYPAL||{};window.PAYPAL=e,e.muse=e.muse||{};var t=window.PaypalOffersObject,r=window[t].q||[];window[t].qExecuted||(window[t].qExecuted={});var n=window[t].qExecuted;window[t].pptmTrack&&(Y.track=window[t].pptmTrack),window[t].log&&(Y.log=window[t].log);for(var o=0;o<r.length;o++)if(r[o].length&&"showOffer"===r[o][0])return delete e.muse,delete window.PaypalOffersObject,void delete window[t];for(var i=function(e,t){if("function"!=typeof Y[e])throw new Error("`".concat(e,"` is not a valid command."));try{var r="".concat(e,"/").concat(JSON.stringify(t));if(n[r])return;n[r]=!0}catch(e){}Y[e].apply(null,t)};r.length;){var a=r.shift(),c=a[0],u=Array.prototype.slice.call(a,1);i(c,u)}window[t]=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return i(e,r)}}};F()}()}();