<!DOCTYPE html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Test Page</title>
</head>
<body>

    <h1>Simple co-browse with chat example</h1>
    <form>
        <label for="firstName">First Name</label>
        <input type="text" id="firstName" size="20" value="Charlie" />
      <div class="cobrowse-masked">
        <label for="lastName">Last Name</label>
        <input type="text" id="lastName" size="20" value="Sheen" />
      </div>
        <label for="agentEmail">Agent Email</label>
        <input type="text" id="agentEmail" size="20" value="csheen@example.com" />

        <button type="button" id="start-chat" onclick="genesysWebchat.startEmbeddedChat()">Start Embedded Chat</button>

      <div class="cobrowse-masked">
		<select>
		 <option value="barbar">Bar Bar</option>
		 <option value="Tyler">Tyler</option>
		 <option value="phil">Phil</option>
		 <option value="gopher">Gopher</option>
		 <option value="vsauce">Vsauce</option>
		 <option value="sadam firestine">sadam firestine</option>
		</select>

		<select>
			<option value="Desmond fush and chups">Desmond fush and chups<option/>
			<option value="Shazza Mayte">Shazza Mayte<option/>
			<option value="LJ CubeBoy">LJ CubeBoy<option/>
			<option value="Vivivivijaaay">Vivivivijaaay<option/>
			<option value="Beckster">Beckster<option/>
		</select>
      </div>


    </form>
    <div id="chatContainer" style="height:600px"></div>

    <iframe src="https://prod-inin-directory-service-profile.s3.amazonaws.com/5821f2d3/5bfd/4a71/9e27/7ab7ed8d8888.jpg"
    width="200" height="200">Tyler Barley</iframe>

    <!-- Replace mypurecloud.com with the hostname for your PureCloud region -->
    <script src="https://apps.mypurecloud.com/webchat/jsapi-v1.js" type="text/javascript"></script>

    <script type="text/javascript">
    let genesysWebchat = (function() {
        function createChatConfig(){
            let firstName = document.getElementById('firstName').value;
            let lastName = document.getElementById('lastName').value;
            let agentEmail = document.getElementById('agentEmail').value;

            // For additional web chat config options, see web chat documentation. This example excludes some of the optional values.
            return {
                // Web chat application URL
                "webchatAppUrl": "https://apps.mypurecloud.com/webchat",

                // Web chat service URL
                "webchatServiceUrl": "https://realtime.mypurecloud.com:443",

                // Numeric organization ID
                "orgId": 12570,

                // Organization name
                "orgName": "pcps",
                // Queue Name
                "queueName": "Patel ACD Queue",
                // Log level
                "logLevel": "DEBUG",

                // Locale code
                "locale": "en",

				// Whether to allow reconnects
                reconnectEnabled: true,

                //Allowed reconnect origins
                reconnectOrigins: ['https://www.whokilledphilthegopher.com/', 'http://www.whokilledphilthegopher.com/', 'whokilledphilthegopher.com/'],


                // Logo used at the top of the chat window
                "companyLogo": {
                    "width": 600,
                    "height": 149,
                    "url": "https://dhqbrvplips7x.cloudfront.net/webchat/1.0.23/company-logo-large-cea5ee47.png"
                },

                // Logo used within the chat window
                "companyLogoSmall": {
                    "width": 149,
                    "height": 149,
                    "url": "https://dhqbrvplips7x.cloudfront.net/webchat/1.0.23/company-logo-small-9c9fe09b.png"
                },

                // Image used for agent
                "agentAvatar": {
                    "width": 462,
                    "height": 462,
                    "url": "https://a-z-animals.com/media/animals/images/original/gopher_4.jpg"
                },

                // Text displayed when the chat window opens
                "welcomeMessage": "Thanks for chatting.",

                // CSS class applied to the chat window
                "cssClass": "webchat-frame",

                // Custom style applied to the chat window
                "css": {
                    "width": "100%",
                    "height": "100%"
                },
offlineSchedules: [{
                    day: 'Monday-Friday',
                    time: '0100-1800',
                    city: 'America/Chicago'
                }],

                // Element that will have 'purecloud-chat-available' class added to it when
                // intersection of online and not offline schedules
                chatNowElement: 'chat-button',
                // Deployment key for your cobrowse deployment from PureCloud admin UI
                "cobrowseConfig": {
                    "deploymentKey": "7CStdNH7ktDknbbLaPRKK2cOo6vdNpJf",
                }
            };
        }
        return {
            startEmbeddedChat: function() {
                let chatConfig = createChatConfig();
                ININ.webchat.create(chatConfig, function(err, webchat) {
                    if (err) {
                        console.error('Unable to share page', (err.stack || err));
                        return;
                    }

                    //Render to frame
                    webchat.renderFrame({
                        containerEl: 'chatContainer'
                    });

                });
            }
        }
    })();
    </script>

</body>
</html>
